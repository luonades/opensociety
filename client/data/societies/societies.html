<template name="societies">
<div id="{{className}}" class="items">

  {{#if adding "societies"}}
    {{> societiesAdd}}
  {{else}}
    {{> societiesAddPrompt}}
  {{/if}}

  {{#each listItems "societies"}}
    {{> societiesItem}}
  {{/each}}

</div>
</template>


<template name="societiesAddPrompt">
<button id="societiesAddPrompt" class="button societiesEditableView itemsAddPrompt">
  Create a new society
</button>
</template>

<template name="societiesAdd">
<div class="itemsAdd">
  {{> societiesEditableView}}
  <div class="itemsAddControls itemsControls societiesAddControls">
    {{> itemsAddControls}}
  </div>
</div>
</template>

<template name="societiesItem">
{{#if modeIs "societies" "list"}}
  {{> societiesList}}
{{/if}}
{{#if modeIs "societies" "view"}}
  {{> societiesView}}
{{/if}}
{{#if modeIs "societies" "edit"}}
  {{> societiesEdit}}
{{/if}}
{{#if modeIs "societies" "remove"}}
  {{> societiesRemove}}
{{/if}}
</template>

<template name="societiesList">
<div class="button itemsList clickable societiesList">
{{> societiesQuickView}}
</div>
</template>

<template name="societiesView">
<div class="button itemsList clickable societiesList">
{{> societiesQuickView}}
</div>
<div class="itemsView societiesView">
{{> societiesFullView}}

{{> chat topicId=_id }}

{{#if haveEditAccessToTheItem }}
  {{> itemsViewControls}}
{{else}}
  {{> itemsViewRestrictedControls}}
{{/if}}

{{> societiesJoin}}
</div>
</template>

<template name="societiesEdit">
<div class="button itemsList clickable societiesList">
{{> societiesQuickView}}
</div>
<div class="itemsEdit societiesEdit">
{{> societiesEditableView}}
{{> itemsEditControls}}
</div>
</template>

<template name="societiesRemove">
<div class="button itemsList clickable societiesList">
{{> societiesQuickView}}
</div>
<div class="itemsRemove societiesRemove">
{{> societiesFullView}}
{{> itemsRemoveControls}}
</div>
</template>




<template name="societiesQuickView">
<h2>{{name}}</h2>
<p>{{issues}}</p>
</template>

<template name="societiesFullView">
<table>
  <tr><td>Name: {{name}}</td></tr>
  <tr><td>Description: {{description}}</td></tr>
  <tr><td>Principles: {{principles}}</td></tr>
  <tr><td>Laws: {{rules}}</td></tr>
  <tr><td>Members: {{memberCount}}
  {{#if currentUser}} 
    (you are {{#if notMember}} not {{/if}} a member) 
  {{/if}} </td></tr>
  <tr><td>Since: {{since}}</td></tr>
  <tr><td>Issues: {{issues}}</td></tr>
</table>
</template>



<template name="societiesEditableView">
<form class="itemsAdd itemsEdit societiesEdit">
<table>
  <tr><td><input class="name" type="text" name="name" value="{{name}}" placeholder="Name" /></td></tr>
  <tr><td><input class="since" type="text" name="since" value="{{since}}" placeholder="Since" /></td></tr>
  <tr><td><textarea class="description" name="description" value="{{description}}" rows="5" cols="50" wrap="hard" placeholder="Description" ></textarea></td></tr>
  <tr><td><textarea class="principles" name="principles" value="{{principles}}" rows="5" cols="50" wrap="hard" placeholder="Principles" ></textarea></td></tr>
  <tr><td><textarea class="rules" name="rules" value="{{rules}}" rows="5" cols="50" wrap="hard" placeholder="Laws" ></textarea></td></tr>
  <tr><td><input class="issues" type="text" name="issues" value="{{issues}}" placeholder="Issues" /></td></tr>
  <tr><td><input class="owner" type="hidden" name="owner" value="{{userId}}" readonly=readonly /><p>{{userEmail}}</p></td></tr>

</table>
</form>
</template>


<template name="societiesJoin">
{{#if memberOfTheSociety }}
  <button class="button exit">Exit</button>
{{else}}
  <button class="button join">Join</button>
{{/if}}
</template>
